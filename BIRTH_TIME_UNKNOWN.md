# ⏰ 출생 시간을 모를 때 처리 방법

## 🎯 문제
> "태어난 시간을 모를 때는 어떻게 하는 게 좋을까?"

---

## ✅ 구현된 솔루션

### 1. **"시간 모름" 체크박스 추가**

#### 사주 명리학
```html
┌─────────────────────────────────────┐
│ BIRTH TIME                          │
├─────────────────────────────────────┤
│ [12:00]  ☐ 시간 모름               │
│                                     │
│ 💡 시간을 모르면 기본값(12:00 정오) │
│    으로 분석됩니다. 시주(時柱)는    │
│    제외되고 일주까지만 분석됩니다.  │
└─────────────────────────────────────┘
```

#### 점성학
```html
┌─────────────────────────────────────┐
│ BIRTH TIME                          │
├─────────────────────────────────────┤
│ [12:00]  ☐ 시간 모름               │
│                                     │
│ 💡 시간을 모르면 정오(12:00)로      │
│    가정합니다. 상승궁은 정확하지    │
│    않을 수 있습니다.                │
└─────────────────────────────────────┘
```

#### 궁합
```
이미 시간이 선택사항으로 구현되어 있음
→ 별도 수정 불필요
```

---

## 🔧 기능 상세

### 1. UI 동작

#### 체크박스 클릭 시
```javascript
☐ 시간 모름 → ☑ 시간 모름

효과:
- 시간 입력 필드 → 12:00으로 자동 설정
- 입력 필드 비활성화 (회색으로 변경)
- 수정 불가 상태
```

#### 체크 해제 시
```javascript
☑ 시간 모름 → ☐ 시간 모름

효과:
- 시간 입력 필드 초기화 (비워짐)
- 입력 필드 활성화
- 사용자가 직접 입력 가능
```

### 2. 기본값 처리

#### JavaScript
```javascript
const t = document.getElementById('s-time').value || '12:00';
const timeUnknown = document.getElementById('s-time-unknown').checked;

currentUserInfo = {
    // ...
    birthTime: t,           // "12:00" (기본값)
    timeUnknown: timeUnknown // true/false
};
```

#### 서버로 전송
```json
{
    "userInfo": {
        "name": "홍길동",
        "birthDate": "1990-01-05",
        "birthTime": "12:00",
        "timeUnknown": true
    }
}
```

---

## 📊 사주 명리학에서의 처리

### 시간 정보 있을 때
```
사주 명식: 경오년 무인월 갑자일 경오시
         [년주] [월주] [일주] [시주]
         ↑     ↑     ↑     ↑
       모두 정확함
```

### 시간 정보 없을 때 (12:00 기준)
```
사주 명식: 경오년 무인월 갑자일 병오시
         [년주] [월주] [일주] [시주?]
         ↑     ↑     ↑     ↑
       정확   정확   정확   부정확

⚠️ 시주는 참고만 하세요
→ 일주까지의 분석이 정확합니다
```

### AI 분석 시 안내
```
분석 중...

⚠️ 시간 정보 없음: 시주(時柱)는 정오(12:00) 기준으로 
참고만 하세요. 일주까지의 분석이 더 정확합니다.

사주 명식: 경오년 무인월 갑자일 병오시

[일간 분석]
일간 '갑목'은... (정확)

[에너지 균형]
년월일주를 보면... (정확)

[시주 참고]
시주는 정확하지 않으므로 참고만 하세요.
```

---

## 🌟 점성학에서의 처리

### 시간 정보 있을 때
```
Big 3:
- 태양: 물병자리 ✅ (날짜로 계산, 정확)
- 달: 쌍둥이자리 ✅ (시간으로 계산, 정확)
- 상승궁: 게자리 ✅ (시간+장소로 계산, 정확)
```

### 시간 정보 없을 때 (12:00 기준)
```
Big 3:
- 태양: 물병자리 ✅ (날짜로 계산, 정확)
- 달: 쌍둥이자리 ⚠️ (정오 기준, 참고만)
- 상승궁: 황소자리 ❌ (정오 기준, 부정확)

⚠️ 상승궁은 정확한 출생 시간이 필요합니다
→ 태양과 행성 배치 분석에 집중하세요
```

### AI 분석 시 안내
```
분석 중...

⚠️ 시간 정보 없음: 상승궁(ASC)은 정오(12:00) 기준이므로 
정확하지 않을 수 있습니다. 태양, 달, 행성 배치 분석에 
집중하세요.

[태양 - 물병자리] ✅ 정확
혁신적이고 독립적인 성향...

[달 - 쌍둥이자리] ⚠️ 참고
감정적으로 호기심이 많고...

[상승궁 - 황소자리] ❌ 부정확
(정확한 시간 필요)
```

---

## 💡 사용자 안내 메시지

### 로딩 메시지

#### 사주 - 시간 있음
```
🔮 운명의 데이터를 분석하고 있습니다...
(대운 흐름 계산 중)
```

#### 사주 - 시간 없음
```
🔮 운명의 데이터를 분석하고 있습니다...
(대운 흐름 계산 중)

⚠️ 시간 정보가 없어 시주(時柱)는 제외되고 
일주까지만 분석됩니다.
```

#### 점성학 - 시간 있음
```
🌌 별들의 위치를 분석하고 있습니다...
(양력 기준, 행성 배치 계산 중)
```

#### 점성학 - 시간 없음
```
🌌 별들의 위치를 분석하고 있습니다...
(양력 기준, 행성 배치 계산 중)

⚠️ 시간 정보가 없어 상승궁(ASC)이 정확하지 
않을 수 있습니다.
```

---

## 🧪 사용 시나리오

### 시나리오 1: 시간을 정확히 아는 경우
```
1. 시간 입력: 14:30
2. "시간 모름" 체크 안 함
3. 제출
   → birthTime: "14:30"
   → timeUnknown: false
4. 정확한 사주/점성학 분석
```

### 시나리오 2: 시간을 모르는 경우
```
1. "시간 모름" 체크
2. 시간 자동으로 12:00 설정
3. 제출
   → birthTime: "12:00"
   → timeUnknown: true
4. 안내 메시지와 함께 분석
   - 사주: 일주까지만 신뢰
   - 점성학: 상승궁 제외하고 분석
```

### 시나리오 3: 대략적인 시간대만 아는 경우
```
1. "오후였던 것 같아" → 14:00 입력
2. "시간 모름" 체크 안 함
3. 제출
   → 입력한 시간으로 분석
   → 사용자 판단에 맡김
```

---

## 📋 시간별 정확도 가이드

### 사주 명리학

| 주 | 정확도 | 시간 필요 여부 |
|----|--------|---------------|
| 년주 | ✅✅✅ | 년도만 필요 |
| 월주 | ✅✅✅ | 월만 필요 |
| 일주 | ✅✅✅ | 일만 필요 |
| 시주 | ⚠️⚠️⚠️ | **시간 필수** |

**권장사항:**
- 시간 모르면: 년월일주 중심 분석
- 시주는 참고만
- 대운, 세운 분석은 일주로도 가능

### 점성학

| 요소 | 정확도 | 시간 필요 여부 |
|------|--------|---------------|
| 태양 | ✅✅✅ | 날짜만 필요 |
| 수성 | ✅✅✅ | 날짜만 필요 |
| 금성 | ✅✅✅ | 날짜만 필요 |
| 화성 | ✅✅✅ | 날짜만 필요 |
| 달 | ⚠️⚠️ | 시간 영향 있음 |
| 상승궁 | ❌❌❌ | **시간 필수** |

**권장사항:**
- 시간 모르면: 행성 배치 중심 분석
- 상승궁은 무시
- 하우스 시스템 적용 불가

---

## 🔍 기술 구현

### 1. toggleTimeInput() 함수
```javascript
function toggleTimeInput(prefix) {
    const timeInput = document.getElementById(`${prefix}-time`);
    const checkbox = document.getElementById(`${prefix}-time-unknown`);
    
    if (checkbox.checked) {
        // 시간 모름 체크
        timeInput.value = '12:00';
        timeInput.disabled = true;
        timeInput.style.opacity = '0.5';
        timeInput.style.cursor = 'not-allowed';
    } else {
        // 체크 해제
        timeInput.value = '';
        timeInput.disabled = false;
        timeInput.style.opacity = '1';
        timeInput.style.cursor = 'text';
    }
}
```

### 2. 기본값 처리
```javascript
// 시간이 비어있으면 12:00 사용
const t = document.getElementById('s-time').value || '12:00';
```

### 3. 서버 전달
```javascript
currentUserInfo = {
    birthTime: t,              // "12:00" or 실제 시간
    timeUnknown: timeUnknown   // true or false
};
```

### 4. AI 프롬프트
```javascript
const timeWarning = rawData.userInfo.timeUnknown 
    ? '\n\n⚠️ **시간 정보 없음**: ...' 
    : '';

const prompt = `
[분석 데이터]
- 사주 명식: ${sajuText}${timeWarning}
...
`;
```

---

## ✅ 개선 효과

### Before
```
❌ 시간 필수 입력 → 막막함
❌ 대충 입력하면 잘못된 분석
❌ 정확도에 대한 안내 없음
```

### After
```
✅ "시간 모름" 옵션 제공
✅ 기본값(12:00) 자동 설정
✅ 명확한 정확도 안내
✅ 신뢰할 수 있는 부분만 강조
✅ 사용자가 선택 가능
```

---

## 💡 추가 고려사항

### 1. 시간 추정 방법 안내
```
앱 내 도움말:
"출생 시간을 모르시나요?
- 출생 신고서 확인
- 부모님께 문의
- 병원 기록 확인
- 대략적인 시간대라도 입력하시면 더 정확합니다"
```

### 2. 정확도 표시
```
분석 결과에 정확도 표시:
✅ 높음: 년월일주 (시간 불필요)
⚠️ 중간: 시주 (시간 추정)
❌ 낮음: 시주 (시간 모름)
```

### 3. 시간대별 분석
```
향후 기능:
"여러 시간대로 분석해보기"
- 00:00 - 06:00
- 06:00 - 12:00
- 12:00 - 18:00
- 18:00 - 24:00
→ 공통점 찾기
```

---

## 🎯 결론

**시간을 모르는 사용자도 편하게 사용할 수 있도록 개선 완료!**

- ✅ "시간 모름" 체크박스 추가
- ✅ 기본값(12:00) 자동 설정
- ✅ 정확도 명확히 안내
- ✅ 신뢰할 수 있는 부분 강조
- ✅ 사주: 일주까지 정확
- ✅ 점성학: 행성 배치 중심

**이제 모든 사용자가 자신의 상황에 맞게 분석을 받을 수 있습니다!** 🎉
